# ИДЗ-4. Построение многопоточных приложений.

## Вариант 19.

# Условие задачи

Задача о магазине - 2 (забывчивые покупатели). В магазине работают два отдела, каждый отдел обладает уникальным ассортиментом. В каждом отделе работает один продавец. В магазин ходят исключительно забывчивые покупатели, поэтому каждый покупатель носит с собой список товаров, которые желает купить. Покупатель приобретает товары точно в том порядке, в каком они записаны в его списке. При этом товары в списке расположены в случайном порядке, что заставляет покупателя переходить от отдела к отделу, если это требуется для совершения покупок. Продавец может обслужить только одного покупателя за раз. Покупатель, вставший в очередь, засыпает пока не дойдет до продавца. Продавец засыпает, если в его отделе нет покупателей, и просыпается, если появится хотя бы один. Создать многопоточное приложение,моделирующее работу магазина в течение рабочего дня.

# Оглавление

### Введение

- [О программе](#О-программе)
  - [Входные данные](#Входные-данные)
  - [Аргументы запуска](#Аргументы-запуска)
- [Представленные файлы](#Представленные-файлы)
- [О тестировании](#О-тестировании)

### Отчет

- [Mark 4](#Mark-4)
- [Mark 5](#Mark-5)

### Прочее

- [Checklist](#Checklist)

# Введение

## О программе

Программа на C изначально разрабатывалась с учетом всех требований включительно **до оценки 9**.
Поэтому, с самого начала, присутствует разделение на модули, работа с файлами, генерация случайных данных и подсчет времени работы программы.

После работы, в консоль выводится затраченное время в миллисекундах (без учета ввода и вывода).

## Входные данные

Ограничение на точность: `0 < e (epsilon)`.

При вводе значений, программа подразумевает, что на вход подается корректное число типа double.

## Аргументы запуска

TODO
|Аргумент|Описание|Пример|
|---|---|---|
|`./a.out <epsilon>`||`./a.out 0.001`|
|`<epsilon> -file <входной файл> [выходной файл]`|Передача и получение данных из программы с использованием файлов. Выходной файл может быть опущен, в таком случае результат выполнения будет выведен в консоль|`./a.out 0.3 -file input.txt`, `./a.out 0.1 -file input.txt output.txt`|
|`-random <seed>`|Запуск программы в режиме генерацией случайных данных. Сгенерированная строка и результат выполнения выводятся в консоль|`./a.out -random 10`|
|`-test <seed>`|Стресс-тестирование программы.|`./a.out -test 235`|

## Представленные файлы

```
| /c-source - исходный код программы на языке C
| /tests
|   | /temp - папка с временными файлами генерируемыми тестовой утилитой. которые подаются на вход программе
|   | main.py - утилита тестирования
| /version-1 - ASM c исполняемым файлом полученный из c-source
| /version-2 - ASM с комментариями и исполняемым файлом (на базе version-0)
```

## О тестировании

Для тестирования был написан специальный Python скрипт, который генерирует многочисленные наборы случайных данных вида `(input, correct_answer)` на которых тестируется каждая программа. В рамках одного тестового прогона, **наборы подаваемые на вход каждой программы одинаковы**.

Тестирование файлового и консольного режима также происходит на одинаковых данных.

Для стресс-теста, каждая программа запускается скриптом несколько раз в режиме `-test`, при этом время выполнения суммируется.

Ознакомиться подробнее с алгоритмом можно в `main.py`

# Mark 4
## Модель параллельных вычислений
Скорее всего, данная задача представляет модель "Клиент-Сервер"
## Результаты выполнения программы
Ознакомиться с результатами работы программы можно ознакомиться в каталоге (/results)[/results].

# Mark 5
## Сценарий поведения представленных в условии задания сущностей

### Customer
Каждый покупатель носит с собой список товаров, которые он желает купить.
Придя в магазин, он смотрит первый невычеркнутый товар, определяет отдел в который следует обратиться.Покупатель, встает в очередь, ждет пока она не закончится, и затем обращается к продавцу - производит покупку. После этого, покупатель покидает отдел повторяет процесс снова.

### Consultant
Продавец ждет, кто-нибудь не встанет в очередб. Как только, приходит покупатель, он помогает ему совершить покупку если в его отделе нет покупателей, и просыпается, если появится хотя бы один.
Разумеется, Продавец может обслужить только одного покупателя за раз.   
 
### Department
Абстракция 

# Mark 6
# Mark 7
# Mark 8


# Checklist

### 4 балла
- [x] Приведено условие задачи.
- [x] Описана модель параллельных вычислений, используемая при разработке многопоточной программы.
- [x] Описаны входные данные программы, включающие вариативные
диапазоны, возможные при многократных запусках.
- [x] Реализовано консольное приложение, решающее поставленную задачу с использованием одного варианта синхропримитивов.
- [ ] Ввод данных в приложение реализован с консоли.
- [ ] Результаты работы приведены в отчете.

### 5 баллов
В дополнение к требованиям на предыдущую оценку
- [x] В программу добавлены комментарии, поясняющие выполняемые
действия и описание используемых переменных.
- [x] В отчете должен быть приведен сценарий, описывающий одновременное поведение представленных в условии задания сущностей в терминах предметной области. То есть, описано поведение объектов
разрабатываемой программы как взаимодействующих субъектов, а не то, как это будет реализовано в программе.

### 6 баллов
В дополнение к требованиям на предыдущую оценку
- [ ] В отчете подробно описан обобщенный алгоритм, используемый
при реализации программы исходного словесного сценария. В котором показано, как на программу отображается каждый из субъектов предметной области.
- [ ] Реализован ввод данных из командной строки.
- [ ] Результаты изменений отражены в отчете.

### 7 баллов
В дополнение к требованиям на предыдущую оценку
- [ ] В программу добавлены ввод данных из файла и вывод результатов
в файл.
- [ ] Приведены входные и выходные файлы с различными результатами выполнения программы.
- [ ] Результаты работы программы должны выводиться на экран и записываться в файл.
- [ ] Ввод данных из командной строки расширен с учетом введенных
изменений.
- [ ] Результаты изменений отражены в отчете.

### 8 баллов
В дополнение к требованиям на предыдущую оценку
- [ ] В программу добавлена генерация случайных данных в допустимых диапазонах.
- [ ] Приведены входные и выходные файлы с различными результатами выполнения программы.
- [ ] Ввод данных из командной строки расширен с учетом введенных
изменений.
- [ ] Результаты изменений отражены в отчете.