# ИДЗ-1
## Check List

### Оценка 4
- [x] Приведено решение задачи на C.
- [ ] В полученную ассемблерную программу, откомпилированную без оптимизирующих и отладочных опций, добавлены комментарии, поясняющие
эквивалентное представление переменных в программе на C.
- [ ] Из ассемблерной программы убраны лишние макросы за счет использования соответствующих аргументов командной строки и/или за счет
ручного редактирования исходного текста ассемблерной программы.
- [ ] Модифицированная ассемблерная программа отдельно откомпилирована
и скомпонована без использования опций отладки.
- [x] Представлено полное тестовое покрытие, дающее одинаковый результат
на обоих программах. Приведены результаты тестовых прогонов для обоих программ, демонстрирующие эквивалентность функционирования.
- [ ] Сформировать отчет, описывающий результаты тестовых прогонов и используемых опций компиляции и/или описания проведенных модификаций.

### Оценка 5
- [x] В реализованной программе использовать функции с передачей данных
через параметры.
- [ ] Использовать локальные переменные.
- [ ] В ассемблерную программу при вызове функции добавить комментарии,
описывающие передачу фактических параметров и перенос возвращаемого результата.
- [ ] В функциях для формальных параметров добавить комментарии, описывающие связь между параметрами языка Си и регистрами (стеком).
- [ ] Добавить информацию о проведенных изменениях в отчет.

### Оценка 6

- [ ] Рефакторинг программы на ассемблере за счет максимального использования регистров процессора. Добавление этой программы к уже представленным.
- [ ] Добавление комментариев в разработанную программу, поясняющих эквивалентное использование регистров вместо переменных исходной программы на C.
- [ ]  Представление результатов тестовых прогонов для разработанной программы. Оценка корректности ее выполнения на основе сравнения тестовых прогонов результатами тестирования предшествующих программ.
- [ ]  Добавить новую информацию в отчет


### Оценка 7
- [x] Реализация программы на ассемблере, полученной после рефакторинга,
в виде двух или более единиц компиляции.
- [x] Задание файлов с исходными данными и файла для вывода результатов
с использованием аргументов командной строки.
- [ ] Добавить в отчет информацию о проделанных изменениях и результаты
работы с тестовыми файлами.

### Оценка 8
- [x] Добавление в программу генератора случайных наборов данных, расширяющих возможности тестирования. Подключение генератора к программе с выбором в командной строке варианта ввода данных.
- [x] Расширение анализа командной строки для выбора способа порождения
исходных данных. Добавление данных, порождаемых генератором.
- [ ] Модификация программы на C и программы на ассемблере, полученной
после рефакторинга, для проведения сравнения на производительность.
Необходимо добавить замеры во времени, которые не учитывают время
ввода и вывода данных. Для увеличения времени работы минимум до 1
секунды, в зависимости от особенностей программы, можно либо выбирать соответствующие размеры исходных данных, либо зацикливать для
многократного выполнения ту часть программы, которая выполняет вычисления.
- [ ] Представить полученные данные в отчете для разных вариантов тестовых прогонов

### Оценка 9
- [ ] Используя опции оптимизации по скорости, сформировать из модифицированной программы на C исходный код ассемблере. Провести сравнительный анализ с предыдущими ассемблерными программами по размеру ассемблерного кода, размеру исполняемого файла и производительности.
- [ ] Аналогично, используя опции оптимизации по размеру, сформировать
код на ассемблере. Провести сравнительный анализ с предыдущими ассемблерными программами по размеру ассемблерного кода, размеру исполняемого файла и производительности.
- [ ] Представить в отчете полученные результаты, дополнив данные представленные в предыдущем отчете.

### Оценка 10
- [ ] Избавиться от инфляции


## main()
### Локальные перменные
- DWORD - 4[rbp]     - array size
- DWORD - 8[rbp]     - rand_seed
- DWORD - 12[rbp]    - input_mode
- DWORD - 16[rbp]    - clocks_elapsed
- DWORD - 20[rbp]    - i
- QWORD - 32[rbp]    - file_path
- QWORD - 40[rbp]    - start_time 
- QWORD - 48[rbp]    - end_time
- DWORD - 52[rbp]    - количество аргументов запуска
- QWORD - 64[rbp]    - указатель на аргументы
### Параметры и возвращаемый результат
- edi - argc
- rsi - argc
- rax (return) - ezit code

## random_fill_array()
### Локальные перменные
- DWORD - 4[rbp]     - i
- QWORD - 24[rbp]	- array
- DWORD - 28[rbp]    - size
- DWORD - 32[rbp]	- seed
### Параметры и возвращаемый результат
- rdi - &array
- esi - size
- edx - seed
- rax (return) - array_size

## process_array()
### Локальные перменные
- DWORD - 4[rbp]     - i
- QWORD - 24[rbp]    - arrya
- DWORD - 28[rbp]    - size
### Параметры и возвращаемый результат
- rdi - &array
- esi - size

## read_from_console()
### Локальные перменные
- DWORD - 4[rbp]     - i
- DWORD - 8[rbp]     - n
- QWORD - 24[rbp]    - &array
- DWORD - 28[rbp]    - max_size
### Параметры и возвращаемый результат
- rdi - &array
- esi - max_size
- rax (return) - array_size

## print_array()
### Локальные перменные
- DWORD - 4[rbp]     - i
- QWORD - 24[rbp]    - &array
- DWORD - 28[rbp]    - size
### Параметры и возвращаемый результат
- rdi - &array
- esi - size

## read_array_from_file()
### Локальные перменные
- DWORD - 4[rbp]     - i
- QWORD - 16[rbp]    - &in_file
- DWORD - 20[rbp]    - n
- QWORD - 40[rbp]    - &array
- QWORD - 48[rbp]    - &filepath
- DWORD - 52[rbp]    - max_size
### Параметры и возвращаемый результат
- rdi - &array
- rsi - &filepath
- edx - max_size
- rax (return) - array_size

## save_array_to_file()
### Локальные перменные
- QWORD - 16[rbp]    - FILE
- QWORD - 24[rbp]    - &array
- DWORD - 28[rbp]    - size
- QWORD - 40[rbp]    - filepath
### Параметры и возвращаемый результат
- rdi - &array
- rsi - &filepath
- edx - size


# Но для начала, пару слов...
Программа сразу разрабатывалась с учетом всех требований включительно до 9.
Поэтому, с самого начала присутствуем разделение на модули, работа с файлами и прочее

# Mark 4
- [ASM код исходника на С](/c-source/) 
- [АSM код с комментариями](/asm-source/)

Для получения изначального ASM кода
```
gcc -masm=intel \
    -fno-asynchronous-unwind-tables \
    -fno-jump-tables \
    -fno-stack-protector \
    -fno-exceptions \
    ./c-source/*.c \
    -S 
```

Для компиляции обоих программ: 
```
gcc *.s
```


Резльтаты тестовых прогонов обоих программ на одинаковых наборах случайных данных
``` 
python3 tests/main.py c-source/a.out task-1/a.out
```
```
✓ c-source/a.out:       Console Tests passed
✓ task-1/a.out: Console Tests passed
✓ c-source/a.out:       File Tests passed
✓ task-1/a.out: File Tests passed
```